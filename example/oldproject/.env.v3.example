# Service Desk Plus MCP V3 Configuration
# Copy this file to .env and fill in your values

# ===== REQUIRED: Service Desk Plus OAuth =====
SDP_CLIENT_ID=your_client_id_here
SDP_CLIENT_SECRET=your_client_secret_here
SDP_INSTANCE_NAME=your_instance_name
SDP_AUTH_CODE=your_auth_code_here

# Optional: Custom base URL (if not using standard)
# SDP_BASE_URL=https://custom.servicedeskplus.com

# ===== Version Selection =====
# Use V2 client with new rate limiting (recommended)
SDP_USE_V2_CLIENT=true

# ===== Database Configuration =====
# Enable database features for persistence
SDP_USE_DB_TOKENS=true
SDP_USE_AUDIT_LOG=true
SDP_USE_CHANGE_TRACKING=true

# Database connection
SDP_DB_HOST=localhost
SDP_DB_PORT=5433
SDP_DB_NAME=sdp_mcp
SDP_DB_USER=sdpmcpservice
SDP_DB_PASSWORD=your_secure_password_here

# ===== Rate Limiting Configuration =====
# API rate limits (requests per period)
SDP_RATE_LIMIT=60
SDP_MAX_REQUESTS_PER_MINUTE=60
SDP_MAX_REQUESTS_PER_HOUR=1000

# Token management
SDP_TOKEN_CHECK_INTERVAL=60000      # Check token expiry every minute
SDP_TOKEN_REFRESH_MARGIN=300000     # Refresh 5 minutes before expiry

# Circuit breaker settings
SDP_CIRCUIT_FAILURE_THRESHOLD=3     # Failures before opening
SDP_CIRCUIT_RESET_TIMEOUT=300000    # 5 minutes

# ===== V3 Feature Flags =====
# Enable advanced features
SDP_ENABLE_MONITORING=true          # Real-time monitoring
SDP_ENABLE_ANALYTICS=true           # Token usage analytics
SDP_ENABLE_QUEUE=true               # Priority request queue
SDP_ENABLE_COORDINATION=true        # Multi-instance coordination

# Monitoring settings
SDP_MONITORING_INTERVAL=60000       # Collect metrics every minute

# Queue settings
SDP_QUEUE_CONCURRENT=5              # Max concurrent queue processors
SDP_QUEUE_RETRIES=3                 # Max retry attempts

# ===== Logging and Debugging =====
# Log levels: error, warn, info, debug
LOG_LEVEL=info

# Enable debug logging for specific components
# DEBUG_AUTH=true
# DEBUG_RATE_LIMIT=true
# DEBUG_QUEUE=true

# ===== Instance Identification =====
# For multi-instance deployments
# HOSTNAME=server-1
# INSTANCE_NAME=production-1

# ===== OpenTelemetry (Optional) =====
# For advanced monitoring
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
# OTEL_SERVICE_NAME=sdp-mcp-server
# OTEL_TRACES_EXPORTER=otlp
# OTEL_METRICS_EXPORTER=otlp

# ===== Performance Tuning =====
# Connection pool settings
# DB_POOL_MIN=2
# DB_POOL_MAX=10
# DB_IDLE_TIMEOUT=10000

# Request timeouts
# API_TIMEOUT=30000
# DB_QUERY_TIMEOUT=5000

# ===== Security =====
# Enable additional security features
# ENABLE_REQUEST_SIGNING=true
# ENABLE_RESPONSE_VALIDATION=true
# MAX_REQUEST_SIZE=10485760  # 10MB

# ===== Development Settings =====
# Only for development/testing
# DISABLE_SSL_VERIFICATION=false
# MOCK_API_RESPONSES=false
# ENABLE_REQUEST_LOGGING=false